---
title: Unicode-从编码说起
date: 2018-07-15 22:18:08
categories: "其他"
tags: ["Unicode","编码"]
---
## 从字符编码说起 ##
人类需要传递信息。当信息的传递从纸媒进化到无线电时代以及计算机时代的时候，通过机器传递信息，就需要把人能读懂的信息（字符）转化成机器能够有效传递、储存甚至理解的信息（比如二进制数据）。这个把“字符集中的字符编码为指定集合中某一对象”的过程，就是编码。

电台时代，字符被一一映射到摩尔斯电码；计算机时代，字符被一一映射到二进制数据。那么问题来了——怎么映射？

既然计算机储存信息的最小单位是比特(bit),八个比特为一字节(Byte)，最容易想到的方法，当然就是每一个字符映射到一个字节——于是ASCII诞生了。
### ASCII字符集
一个字节有8位，可以表示256种状态，美国人规定0x20以下的字节状态为控制码，可以控制打印机进行换行等操作；然后又规定所有的空格、标点符号、数字、大小写字母分别用连续的字节状态表示，一直编到了第127号，这样计算机就可以用不同字节来存储英语的文字了。
### 扩展字符集
只有数字和字母显然是不够用的，比如其他国家的人民使用自己的语言怎么办？于是人们利用剩下的128-255这些状态继续编码，加入了自己国家的字母以及其他一些符号，这就是“扩展字符集”
### BDCS
是的一个字节是满足不了大家的——那就用两个啊！于是BDCS产生了（Double Byte Charecter Set）。比如以下几个标准
#### GB2312
6000多个常用汉字看到只有256种状态的单字节时内心是崩溃的——于是为了把汉字也进行编码，我们采用了两个字节来表示汉字和其他一些符号。GB2312规定，小于0x20的单字节含义依然不变，但两个大于127的字符连在一起时，就表示一个汉字，前面的一个字节（他称之为高字节）从0xA1用到0xF7，后面一个字节（低字节）从0xA1到0xFE，这样我们就可以组合出大约7000多个简体汉字了，还可以把日文假名、数学符号都加进去，数字和字母以及标点也都再来一份，也就是全角字符。这个方案就是GB2312。
#### GBK
是的，6000多个汉字也是不够的——有人起名字就是要用生僻字呢？于是干脆不要求低字节非要是127以后的了，把以前不用的码位都拿出来跟大家分享啊！在GB2312基础上添加了20000多个汉字和符号，这版解决方案叫做GBK标准。
#### GB18030
是的，20000多个汉字也是不够的，我们的少数民族同志们也是要用电脑的呀同志们！于是添加了少数民族文字，GBK扩展成了GB18030。 
### Unicode
是的，BDCS也是不够的。编码的问题是解决了，但大家都用不同个编码，交流起来就有了很大的问题。于是UCS（Universal Multiple-Octet Coded Character Set）出现了——大家都别吵了，都用这个编码方案吧！不过大家一般俗称Unicode。Unicode规定每个字符用两个字节表示，超过2^16以上的字符再用更多的字节表示。但这样的问题也同样明显：英文字母用两个字节表示，几乎有一半的空间被浪费了，这是不可接受的。
## 字符集和编码
这时候人们意识到，字符集和编码是可以分开的啊！为什么非要搞在一起呢？我们用UCS字符集来将字符对应到码位，码位到字节（编码）再用另一套方案不就可以解决传输和空间浪费的问题了吗！于是面向传输的众多 UTF（UCS Transfer Format）标准出现了，顾名思义，UTF-8就是每次8个位传输数据，而UTF-16就是每次16个位。UTF-8就是在互联网上使用最广的一种unicode的实现方式，这是为传输而设计的编码，并使编码无国界，这样就可以显示全世界上所有文化的字符了。UTF-8最大的一个特点，就是它是一种变长的编码方式。它可以使用1~4个字节表示一个符号，根据不同的符号而变化字节长度，当字符在ASCII码的范围时，就用一个字节表示，保留了ASCII字符一个字节的编码做为它的一部分，注意的是unicode一个中文字符占2个字节，而UTF-8一个中文字符占3个字节）。从unicode到utf-8并不是直接的对应，而是要过一些算法和规则来转换。至于转换方式Google一下就有了，我就不写了。  

参考：https://www.zhihu.com/question/23374078/answer/24385963